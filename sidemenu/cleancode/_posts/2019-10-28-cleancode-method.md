---
layout: post
title: 클린코드 - 함수
description: >
    [본 글은 Robert C. Martin의 "Clean Code"책을 읽으며 정리하였습니다.]
excerpt_separator: <!--more-->

---

<!--more-->

# 함수

함수를 만드는 첫 번째 규칙 : 작게 만들기
함수를 만드는 두 번째 규칙 : 더 작게 만들기?


### 함수는 한 가지를 해야 하고, 한 가지를 잘해야 하고, 한 가지만을 해야한다.


## 함수 당 추상화 수준은 하나로
- 함수가 확실히 '한 가지' 작업만 하려면 함수 내 모든 문장의 추상화 수준이 동일해야 한다.
- 내려가기 규칙
  - 위에서 아래로 프로그램을 읽으면 함수 추상화 수준이 한 번에 한 단계씩 낮아진다.
  - 한 함수 다음에는 추상화 수준이 한 단계 낮은 함수가 온다.
- 추상화 수준이 하나인 함수를 구현하기란 쉽지 않지만 매우 중요한 규칙이다.
- 핵심은 짧으면서도 '한 가지'만을 하는 함수는 추상화 수준을 일관되게 유지하기가 쉬워진다.


## 서술적인 이름 사용
### 좋은 이름이 주는 가치는 아무리 강조해도 지나치지 않다.
- 함수가 작고 단순할수록 서술적인 이름을 고르기도 쉬워진다.
- 길고 서술적인 이름이 짧고 어려운 이름보다, 길고 서술적인 주석보다 좋다.
- 함수 이름을 정할 때에는 여러 단어가 쉽게 읽히는 명명법을 사용한다. 그런 다음, 여러 단어를 사용해 함수 기능을 잘 표현하는 이름을 선택한다.
- 이름을 붙일 때는 일관성이 있어야 한다. 모듈 내에서 함수 이름은 같은 문구, 명사, 동사를 사용한다.


### 명령과 조회를 분리하라
- 함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야한다.

### 오류 코드보다 예외를 사용하라
- 명령 함수에서 오류 코드를 반환하는 방식은 명령/조회 분리 규칙을 미묘하게 위반한다.
- 오류 처리도 '한 가지' 작업에 속한다. 그러므로 오류를 처리하는 함수는 오류만 처리해야 마땅하다.
- 함수에 `try` 키워드가 있다면 함수는 `try` 문으로 시작해 `catch/finally` 문으로 끝나야 한다는 말이다.

### 반복하지 마라
- 중복은 소프트웨어에서 모든 악의 근원이다. 많은 원칙과 기법이 중복을 없애거나 제어할 목적으로 나왔다.
- **E.F. 커드**는 자료에서 중복을 제거할 목적으로 관계형 데이터베이스에 정규 형식을 만들었다.
- **객체지향 프로그래밍**은 코드를 부모 클래스로 몰아 중복을 없앤다.
- **구조적 프로그래밍, AOP, COP** 모두 어떤 면에서 중복 제거 전략이다.


## 구조적 프로그래밍
#### Edsger Dijkstra의 구조적 프로그래밍 원칙
- 모든 함수와 함수 내 모든 블록에 입구와 출구가 하나만 존재해야 한다. 즉, 함수는 `return`문이 하나여야 한다.
- 루프 안에서 `break`나 `continue`를 사용해서는 안 되며 `goto`문은 절대, never 안된다.

#### 위 규칙은 함수가 작다면 별 이익을 제공하지 못하며 함수가 아주 클 때에만 상당한 이익을 제공한다.
- 그러므로 함수를 작게 만든다면 간혹 `return`, `break`, `continue`를 여러 차례 사용해도 괜찮다.
- 오히려 때로는 단일 입/출구 규칙보다 의도를 표현하기 쉬워진다.
- 하지만 `goto`문은 큰 함수에서만 의미가 있으므로, 작은 함수에서는 피해야 한다.