---
layout: post
title: Front-End 성능개선
description: >
    [프론트엔드 성능 개선 방법에 대해 알아보자~]
excerpt_separator: <!--more-->

---

<!--more-->
# Front-End 성능 개선

## 1. Request 수 줄이기

##### 여러 개의 분리된 파일을 병합해 로딩되도록 하면 병합된 파일의 수 만큼 HTTP Request 수를 줄임으로써 초기 로딩속도를 개선할 수 있다.

### 1. Domain Sahrding

- Domain당 병렬적으로 연결할 수 있는 **connection** 수가 정해져 있다.
- 브라우저는 도메인 별 한번에 처리할 수 있는 요청의 개수가 제한되어 있어, 페이지 내 리소스가 단일 도메인에서만 요청되는 경우 병목현상이 발생할 수 있다. 
  - 이 경우, 여러 개의 다른 도메인에서 리소스를 다운로드 받도록 처리하면 병목현상을 제거할 수 있다.

> **주의!!**
>
> 추가적인 도메인의 사용은 DNS lookup 비용이 발생한다.
>
> 2~4개 도메인 내외를 사용 권장(많은 sharding은 오히려 성능에 악영향을 줄 수 있다.)



### 2. 자원의 Merge

- 여러 개의 스크립트를 별도의 request로 loading하지 않고, **하나로 병합하여 하나의 request로 로딩**하면, 각각의 request마다 발생되는 프로세스 단계들을 여러 번 거치는게 아니라 단순화하여 하나의 단계로 처리할 수 있다.
- Merge한 컨텐츠의 크기가 너무 커지게 되면 컨텐츠 다운로드 시간도 길어지기 때문에 적절히 Merge해주는 것이 좋다.



### 3. DataURI Scheme

**작은 용량의 파일을 문서에 인라인으로 삽입할 수 있도록 함**

~~~html
일반적 형태
<img src="http://www.naver.com/naver.png"/>

Data URI
<img src="data:image/png;base64,iVBOR...rkjggg==" />
~~~

- src에 이미지 데이터 문자열로 삽입을 하게되면 자체가 데이터기 때문에 외부데이터 요청이 일어나지 않아 request요청이 일어나지 않는다.
- 이미지 자체는 **binary data**인데, 브라우저에서 이를 인식할 수 있는 **base64**로 encoding해 문서에 삽입되 출력되도록 할 수 있다.

> **주의!!**
>
> DataURI는 별도의 파일이 아니므로 caching 되지 않는다.	
>
> 이미지 파일을 base64로 encoding 후 output 하는 작업이 별도로 필요하다.
>
> 브라우저에 따라 DataURI 지원 최대 크기가 다르다.

#### 언제 적용해야 할까?

1. 검색 결과를 나타내는 페이지의 경우, 시간이 흐름에 따라 검색 결과도 달라지기 때문에 굳이 요소가 캐싱할 필요가 없는 데이터
2. 배경 이미지로 크기가 CSS Sprite이 적합하지 않은 경우
   - 너비/높이가 큰 경우, sprite 사용시 여백이 많이 생길 수 있어 단독 이미지 형태로 사용해야 하는 경우가 발생할 수 있다.



### 4. Lazy loading

- 현재 필요 없는 자원을 onload 이후나, 화면에 노출되는 시점에 자원을 불러들이는 방법으로, 초기 로딩속도를 개선할 수 있다.
- 당장 사용자가 사용하지 않을 것으로 기대되는 데이터와 보이지 않는 영역의 데이터는 사용자의 액션시점 이후 또느 해당 요소가 보이기 직전에 로딩한다.



### 5. Code-Splitting

- 당장 페이지 로딩 시점에 사용되지 않는 코드들을 별도의 chunk파일로 분리하면 초기 로딩이 되는 request의 용량이 줄어든다.



## 2. 리소스 크기 줄이기

## 3. 빠르게 렌더링 하기